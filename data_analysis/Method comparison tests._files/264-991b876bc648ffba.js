"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{34388:function(e,t,n){n.d(t,{T:function(){return r}});function r(e){return void 0!==e.userMessage}},33264:function(e,t,n){var r=n(61706),o=n(35025),a=n(9135),i=n(31501),s=n(61079),c=n(42928),u=n(45813),h=n(48879),d=n(91515);n(138);var p=n(34388),l=n(74516),f=n(49674),g=n(11938),m="https://chat.openai.com/backend-api",v=["cf-ipcountry"];function y(){return(y=(0,r.Z)(function(e,t){var n,r;return(0,u.__generator)(this,function(o){switch(o.label){case 0:return(n=new Headers).append("x-ms-blob-type","BlockBlob"),n.append("x-ms-version","2020-04-08"),n.append("Content-Type",t.type),[4,fetch(e,{method:"PUT",headers:n,body:t})];case 1:if(!(r=o.sent()).ok)throw Error("Error uploading the file: ".concat(t.name,". Response: ").concat(r.status));return[2]}})})).apply(this,arguments)}var _=function(){function e(){(0,o.Z)(this,e)}return e.setAccessToken=function(e){this.accessToken=e},e.getAuthHeader=function(e){var t=e||this.accessToken;if(!t)throw console.error("No access token when trying to use AuthHeader"),Error("No access token when trying to use AuthHeader");return{Authorization:"Bearer ".concat(t)}},e.refreshApiKey=function(){var e=this;if(this.apiKeyRefreshing)return this.apiKeyRefreshing;var t=this;return this.apiKeyRefreshing=(0,r.Z)(function(){var e;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,d.getSession)()];case 1:return(e=n.sent())&&t.setAccessToken(e.accessToken),[2];case 2:throw Error("Cannot refresh access token outside of browser");case 3:return[2]}})})(),setTimeout(function(){e.apiKeyRefreshing=null},6e4),this.apiKeyRefreshing},e.fetch=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this;return(0,r.Z)(function(){var r,a,c,h,d,p;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return[4,fetch(e,r=(0,i.Z)({credentials:"include"},t))];case 1:if((a=u.sent()).status>=500)throw n.intercomEventOnError&&(0,g.LJ)(n.intercomEventOnError,{url:e,status:a.status.toString()}),new f.Q0;if(!(a.status>=400))return[3,12];u.label=2;case 2:return u.trys.push([2,4,,5]),[4,a.json()];case 3:return c=(null==(h=u.sent())?void 0:h.detail)||(null==h?void 0:h.error),[3,5];case 4:return d=u.sent(),console.error("Failed to parse error response",d),[3,5];case 5:if(console.error("API error",e,c),!((null==c?void 0:c.code)==="expired_session_key"||(null==c?void 0:c.code)==="token_expired"))return[3,11];u.label=6;case 6:if(u.trys.push([6,9,,10]),n.isRetry)return[3,8];return[4,o.refreshApiKey()];case 7:return u.sent(),[2,o.fetch(e,r,(0,s.Z)((0,i.Z)({},n),{isRetry:!0}))];case 8:return[3,10];case 9:return p=u.sent(),console.error("Failed to refresh expired access token: ".concat(p)),[3,10];case 10:console.error("Refresh access token failed when retrieving",e,c),window._oaiHandleSessionExpired("fetch",JSON.stringify(c)),u.label=11;case 11:if(null==c?void 0:c.type)throw n.intercomEventOnError&&(0,g.LJ)(n.intercomEventOnError,{url:e,status:a.status.toString(),message:(null==c?void 0:c.message)||c}),new f.gK((null==c?void 0:c.message)||c,a.status,null==c?void 0:c.code,null==c?void 0:c.type);throw new f.Q0;case 12:if(204===a.status)return[2,{}];return[2,a.json()]}})})()},e.getArtifacts=function(){return this.fetch("".concat(m,"/artifacts"),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader())})},e.createArtifact=function(e){return this.fetch("".concat(m,"/artifacts"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify({url:e,contents:"\n"})})},e.uploadDirectly=function(e,t,n,o){var a=this;return(0,r.Z)(function(){var r;return(0,u.__generator)(this,function(s){return r=new FormData,t&&r.append("conversation_id",t),r.append("model",n),r.append("parent_message_id",e),r.append("file",o),[2,a.fetch("".concat(m,"/conversation/upload"),{method:"POST",headers:(0,i.Z)({},a.getAuthHeader()),body:r})]})})()},e.finalizeUpload=function(e,t,n,o){var a=this;return(0,r.Z)(function(){var r;return(0,u.__generator)(this,function(s){return(r=new FormData).append("filename",o.name),t&&r.append("conversation_id",t),r.append("model",n),r.append("parent_message_id",e),[2,a.fetch("".concat(m,"/conversation/finalize_upload"),{method:"POST",headers:(0,i.Z)({},a.getAuthHeader()),body:r})]})})()},e.getUploadLink=function(e,t){var n=this;return(0,r.Z)(function(){var r;return(0,u.__generator)(this,function(o){return r=new FormData,t&&r.append("conversation_id",t),r.append("filename",e.name),[2,n.fetch("".concat(m,"/conversation/get_upload_link"),{method:"POST",headers:(0,i.Z)({},n.getAuthHeader()),body:r})]})})()},e.uploadUsingFileService=function(e,t,n,o){var a=this;return(0,r.Z)(function(){var r,i;return(0,u.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,a.getUploadLink(o,t)];case 1:if(!(null==(r=s.sent())?void 0:r.upload_url))throw Error("/conversation/get_upload_link result is not valid: ".concat(r));return[4,function(e,t){return y.apply(this,arguments)}(r.upload_url,o)];case 2:return s.sent(),[4,a.finalizeUpload(e,t,n,o)];case 3:return[2,s.sent()];case 4:throw i=s.sent(),l.m.forError(i),i;case 5:return[2]}})})()},e.upload=function(e,t,n,o){var a=this;return(0,r.Z)(function(){return(0,u.__generator)(this,function(r){return[2,a.uploadDirectly(e,t,n,o)]})})()},e.fetchFileForDownload=function(e,t){var n=new URLSearchParams({path:t});return fetch("".concat(m,"/conversation/").concat(e,"/download?").concat(n),{method:"GET",headers:(0,i.Z)({},this.getAuthHeader())})},e.checkFile=function(e,t){var n=new URLSearchParams({path:t});return this.fetch("".concat(m,"/conversation/").concat(e,"/check_file?").concat(n),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader())})},e.sendDocument=function(){return this.fetch("".concat(m,"/private"),{method:"GET",headers:{"Content-Type":"application/json"}})},e.getRetrievalResults=function(e){return this.fetch("".concat(m,"/retrieval/public_data"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify({query:e})})},e.getModels=function(e){return this.fetch("".concat(m,"/models"),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(e))})},e.getConversations=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=new URLSearchParams({offset:e.toString(),limit:t.toString()});return r&&o.set("order","updated"),this.fetch("".concat(m,"/conversations?").concat(o),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(n))},{intercomEventOnError:"fetch-error:conversations:get"})},e.getConversation=function(e,t){return this.fetch("".concat(m,"/conversation/").concat(e),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(t))},{intercomEventOnError:"fetch-error:conversation:get"})},e.generateTitle=function(e,t,n){return this.fetch("".concat(m,"/conversation/gen_title/").concat(e),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify({message_id:t})},{intercomEventOnError:"fetch-error:conversation:generate-title"})},e.generateFollowups=function(e,t,n){return this.fetch("".concat(m,"/conversation/").concat(e,"/experimental/generate_followups"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify({message_id:t,model:n,num_followups:2})},{intercomEventOnError:"fetch-error:conversation:generate-followups"})},e.patchConversation=function(e,t){return this.fetch("".concat(m,"/conversation/").concat(e),{method:"PATCH",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify(t)},{intercomEventOnError:"fetch-error:conversation:edit"})},e.deleteConversations=function(){return this.fetch("".concat(m,"/conversations"),{method:"PATCH",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify({is_visible:!1})},{intercomEventOnError:"fetch-error:conversations:delete"})},e.getLoginLink=function(e){return this.fetch("".concat(m,"/bypass/link"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})})},e.publicApiCompletionStream=function(e,t){var n=this;return(0,r.Z)(function(){var o,s,c,d;return(0,u.__generator)(this,function(d){return o=new AbortController,s={action:e.completionType,messages:e.messages.length>0?e.messages:void 0,conversation_id:""===e.threadId?void 0:e.threadId,parent_message_id:e.parentMessageId,model:e.model,plugin_ids:e.threadId?void 0:e.enabledPluginIds,timezone_offset_min:new Date().getTimezoneOffset(),variant_purpose:e.variantPurpose,history_and_training_disabled:e.historyDisabled},c="".concat("https://chat.openai.com/backend-api","/conversation"),(0,h.L)(c,{method:"POST",credentials:"include",headers:(0,i.Z)({"Content-Type":"application/json"},n.getAuthHeader()),body:JSON.stringify(s),signal:o.signal,openWhenHidden:!0,onopen:function(e){return(0,r.Z)(function(){var t,n,r;return(0,u.__generator)(this,function(o){switch(o.label){case 0:if(t=e.headers.get("content-type")||"",e.ok&&t.includes("text/event-stream"))return[2];if(!t.includes("application/json"))return[3,2];return[4,e.json()];case 1:if(n=o.sent(),console.error(n),r=(null==n?void 0:n.error)||(null==n?void 0:n.detail)){if(e.status>=500)throw new f.Q0((null==r?void 0:r.message)||r);throw((null==r?void 0:r.code)==="expired_session_key"||(null==r?void 0:r.code)==="invalid_api_key"||(null==r?void 0:r.code)==="token_expired")&&window._oaiHandleSessionExpired("stream",JSON.stringify(r)),new f.gK((null==r?void 0:r.message)||r,e.status,null==r?void 0:r.code,null==r?void 0:r.type,void 0,null==r?void 0:r.clears_in)}o.label=2;case 2:throw new f.Q0}})})()},onmessage:function(e){if("[DONE]"===e.data)o.abort(),t({finish_reason:"stop"});else if("ping"===e.event);else try{var n=JSON.parse(e.data);if(n.error)throw new f.Q0(n.error.message);t({message:n.message,threadId:n.conversation_id})}catch(r){if((0,p.T)(r))throw new f.Q0(r.message)}},onerror:function(e){throw"Failed to fetch"===e.message&&(e=new f.Q0("An error occurred. Either the engine you requested does not exist or there was another issue processing your request. If this issue persists please contact us through our help center at help.openai.com.")),(0,g.LJ)("fetch-error:conversation:new-message",{url:c,message:null==e?void 0:e.message}),t({err:e}),e}}).catch(function(e){(0,a.Z)(e,f.gK)||(0,a.Z)(e,f.Q0)||console.error(e)}),[2,o]})})()},e.runModerationApi=function(e,t,n){return this.fetch("".concat("https://chat.openai.com/backend-api","/moderations"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify({input:e,model:"text-moderation-playground",conversation_id:t,message_id:n})})},e.submitMessageFeedback=function(e){return this.fetch("".concat(m,"/conversation/message_feedback"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify(e)})},e.submitMessageComparisonFeedback=function(e){return this.fetch("".concat(m,"/conversation/message_comparison_feedback"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader()),body:JSON.stringify(e)})},e.getCheckoutLink=function(){return this.fetch("".concat(m,"/payments/checkout"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader())})},e.fetchCustomerPortalUrl=function(e){return this.fetch("".concat(m,"/payments/customer_portal"),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(e))},{intercomEventOnError:"fetch-error:customer_portal:get"})},e.getPlugins=function(e){var t=e.offset,n=e.limit,r=e.statuses,o=e.isInstalled,a=e.accessToken,s=[["offset",t.toString()],["limit",n.toString()],];if(r){var c=!0,u=!1,h=void 0;try{for(var d,p=r[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var l=d.value;s.push(["statuses",l])}}catch(f){u=!0,h=f}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}}o&&s.push(["is_installed","true"]);var g=new URLSearchParams(s);return this.fetch("".concat(m,"/aip/p?").concat(g),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(a))})},e.getPluginByDomain=function(e){var t=e.domain,n=e.accessToken,r=new URLSearchParams({domain:t});return this.fetch("".concat(m,"/aip/p/domain?").concat(r),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(n))})},e.createOrUpdateLocalhostPlugin=function(e){var t=e.localhost,n=e.manifest,r=e.openapiSpec,o=e.accessToken;return this.fetch("".concat(m,"/aip/lhp"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(o)),body:JSON.stringify({localhost:t,manifest:n,openapi_spec:r})})},e.scrapePluginManifest=function(e){var t=e.domain,n=e.manifestAccessToken,r=e.accessToken;return this.fetch("".concat(m,"/aip/p"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(r)),body:JSON.stringify({domain:t,manifest_access_token:n})})},e.getPluginApi=function(e){var t=e.id,n=e.accessToken;return this.fetch("".concat(m,"/aip/p/").concat(t,"/api"),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(n))})},e.updatePluginUserSettings=function(e){var t=e.pluginId,n=e.isInstalled,r=e.accessToken;return this.fetch("".concat(m,"/aip/p/").concat(t,"/user-settings"),{method:"PATCH",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(r)),body:JSON.stringify({is_installed:n})})},e.deletePlugin=function(e){var t=e.id,n=e.accessToken;return this.fetch("".concat(m,"/aip/p/").concat(t),{method:"DELETE",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(n))})},e.setPluginUserHttpToken=function(e){var t=e.id,n=e.userAccessToken,r=e.accessToken;return this.fetch("".concat(m,"/aip/p/").concat(t,"/user-settings/http-auth"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(r)),body:JSON.stringify({access_token:n})})},e.setPluginServiceHttpToken=function(e){var t=e.id,n=e.serviceAccessToken,r=e.accessToken;return this.fetch("".concat(m,"/aip/p/").concat(t,"/http-auth"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(r)),body:JSON.stringify({access_token:n})})},e.setPluginOAuthClientCredentials=function(e){var t=e.id,n=e.clientId,r=e.clientSecret,o=e.accessToken;return this.fetch("".concat(m,"/aip/p/").concat(t,"/oauth"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(o)),body:JSON.stringify({client_id:n,client_secret:r})})},e.getAccountStatus=function(e,t){var n=(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(e));if(t){var r={},o=!0,a=!1,s=void 0;try{for(var u,h=Object.entries(t)[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var d=(0,c.Z)(u.value,2),p=d[0],l=d[1];v.includes(p.toLowerCase())&&(r[p]=l)}}catch(f){a=!0,s=f}finally{try{o||null==h.return||h.return()}finally{if(a)throw s}}n=(0,i.Z)({},r,n)}return this.fetch("".concat(m,"/accounts/check"),{method:"GET",headers:n},{intercomEventOnError:"fetch-error:accounts:get"})},e.deactivateAccount=function(e){return this.fetch("".concat(m,"/accounts/deactivate"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(e))})},e.submitDataExport=function(e){return this.fetch("".concat(m,"/accounts/data_export"),{method:"POST",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(e))})},e.pluginOauthCallback=function(e,t,n,r){var o=new URLSearchParams({code:t,redirect_uri:n});return this.fetch("".concat(m,"/aip/p/").concat(e,"/user-settings/oauth/callback?").concat(o),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader(r))})},e.getPageMetadata=function(e){var t=e.url;return this.fetch("".concat(m,"/opengraph/tags?url=").concat(encodeURIComponent(t)),{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader())})},e.getModelMessageCap=function(){return this.fetch("https://chat.openai.com/public-api/conversation_limit",{method:"GET",headers:(0,i.Z)({"Content-Type":"application/json"},this.getAuthHeader())})},e}();_.auth0Client=null,t.ZP=_},11938:function(e,t,n){n.d(t,{LJ:function(){return s},oG:function(){return a},u$:function(){return i}});var r=n(70079),o="dgkjq2bp";function a(){(0,r.useEffect)(function(){!function(){var e=window,t=e.Intercom;if("function"==typeof t)t("reattach_activator"),t("update",e.intercomSettings);else{var n=document,r=function(){r.c(arguments)};r.q=[],r.c=function(e){r.q.push(e)},e.Intercom=r;var a=function(){var e,t=n.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/".concat(o);var r=n.getElementsByTagName("script")[0];null===(e=r.parentNode)||void 0===e||e.insertBefore(t,r)};"complete"===document.readyState?a():e.attachEvent?e.attachEvent("onload",a):e.addEventListener("load",a,!1)}}()},[])}function i(e,t){var n=window.Intercom;e.id&&n&&n("boot",{app_id:o,user_id:e.id,name:e.name,email:e.email,user_hash:e.intercom_hash,hide_default_launcher:!0,is_chatgpt_user:!0,paid_chatgpt_subscriber:null==t?void 0:t.is_paid_subscription_active,paid_chatgpt_active_until:null==t?void 0:t.subscription_expires_at_timestamp})}function s(e,t){var n=window.Intercom;n&&n("trackEvent",e,t)}}}]);